Step 1/10 : FROM node:8.11.2
 ---> ff2509c12bff
Step 2/10 : ADD package.json /tmp/package.json
 ---> 83d2c1942df0
Step 3/10 : RUN cd /tmp && npm install
 ---> Running in cd5132c7795b
[91mnpm WARN deprecated nodemailer@2.7.2: All versions below 4.0.1 of Nodemailer are deprecated. See https://nodemailer.com/status/
[0m[91mnpm WARN[0m[91m deprecated babel-preset-es2015@6.24.1: ?  Thanks for using Babel: we recommend using babel-preset-env now: please read babeljs.io/env to update! 
[0m[91mnpm[0m[91m [0m[91mWARN[0m[91m [0m[91mdeprecated[0m[91m nomnom@1.8.1: Package no longer supported. Contact support@npmjs.com for more info.
[0m[91mnpm WARN deprecated mailcomposer@4.0.1: This project is unmaintained
[0m[91mnpm WARN deprecated socks@1.1.9: If using 2.x branch, please upgrade to at least 2.1.6 to avoid a serious bug with socket data flow and an import issue introduced in 2.1.0
[0m[91mnpm WARN deprecated uws@9.14.0: stop using this version
[0m[91mnpm[0m[91m [0m[91mWARN[0m[91m [0m[91mdeprecated[0m[91m node-uuid@1.4.8: Use uuid module instead
[0m[91mnpm[0m[91m [0m[91mWARN[0m[91m [0m[91mdeprecated[0m[91m buildmail@4.0.1: This project is unmaintained
[0m[91mnpm WARN deprecated socks@1.1.10: If using 2.x branch, please upgrade to at least 2.1.6 to avoid a serious bug with socket data flow and an import issue introduced in 2.1.0
[0m[91mnpm[0m[91m [0m[91mWARN[0m[91m notice [SECURITY] bootstrap-tagsinput has 1 high vulnerability. Go here for more details: https://nodesecurity.io/advisories?search=bootstrap-tagsinput&version=0.7.1 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.
[0m[91mnpm WARN notice [SECURITY] timespan has 1 low vulnerability. Go here for more details: https://nodesecurity.io/advisories?search=timespan&version=2.3.0 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.
[0m[91mnpm[0m[91m [0m[91mWARN[0m[91m [0m[91mnotice[0m[91m [SECURITY] tunnel-agent has 1 moderate vulnerability. Go here for more details: https://nodesecurity.io/advisories?search=tunnel-agent&version=0.4.3 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.
[0m[91mnpm WARN notice [SECURITY] hoek has 1 moderate vulnerability. Go here for more details: https://nodesecurity.io/advisories?search=hoek&version=2.16.3 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.
[0m
> uws@9.14.0 install /tmp/node_modules/uws
> node-gyp rebuild > build_log.txt 2>&1 || exit 0


> node-sass@4.9.0 install /tmp/node_modules/node-sass
> node scripts/install.js

Downloading binary from https://github.com/sass/node-sass/releases/download/v4.9.0/linux-x64-57_binding.node
Download complete
Binary saved to /tmp/node_modules/node-sass/vendor/linux-x64-57/binding.node
Caching binary to /root/.npm/node-sass/4.9.0/linux-x64-57_binding.node

> phantomjs-prebuilt@2.1.16 install /tmp/node_modules/phantomjs-prebuilt
> node install.js

PhantomJS not found on PATH
Downloading https://github.com/Medium/phantomjs/releases/download/v2.1.1/phantomjs-2.1.1-linux-x86_64.tar.bz2
Saving to /tmp/phantomjs/phantomjs-2.1.1-linux-x86_64.tar.bz2
Receiving...

Received 22866K total.
Extracting tar contents (via spawned process)
Removing /tmp/node_modules/phantomjs-prebuilt/lib/phantom
Copying extracted folder /tmp/phantomjs/phantomjs-2.1.1-linux-x86_64.tar.bz2-extract-1527249696815/phantomjs-2.1.1-linux-x86_64 -> /tmp/node_modules/phantomjs-prebuilt/lib/phantom
Writing location.js file
Done. Phantomjs binary available at /tmp/node_modules/phantomjs-prebuilt/lib/phantom/bin/phantomjs

> pre-commit@1.2.2 install /tmp/node_modules/pre-commit
> node install.js


> spawn-sync@1.0.15 postinstall /tmp/node_modules/spawn-sync
> node postinstall


> node-sass@4.9.0 postinstall /tmp/node_modules/node-sass
> node scripts/build.js

Binary found at /tmp/node_modules/node-sass/vendor/linux-x64-57/binding.node
Testing binary
Binary is fine

> @angular/cli@6.0.0 postinstall /tmp/node_modules/@angular/cli
> node ./bin/ng-update-message.js


> ngx-infinite-scroll@0.8.4 postinstall /tmp/node_modules/ngx-infinite-scroll
> opencollective postinstall


     *** Thank you for using ngx-infinite-scroll! ***

Please consider donating to our open collective
     to help us maintain this package.

  https://opencollective.com/ngx-infinite-scroll/donate

                    ***


> nodemon@1.17.5 postinstall /tmp/node_modules/nodemon
> node bin/postinstall || exit 0

[32mLove nodemon? You can now support the project via the open collective:[22m[39m
 > [96m[1mhttps://opencollective.com/nodemon/donate[0m

[91mnpm notice created a lockfile as package-lock.json. You should commit this file.
[0m[91mnpm WARN @angular/core@6.0.0 requires a peer of zone.js@~0.8.26 but none is installed. You must install peer dependencies yourself.
[0m[91mnpm[0m[91m WARN[0m[91m [0m[91moptional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/fsevents):
[0m[91mnpm [0m[91mWARN[0m[91m notsup[0m[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91m
[0madded 1618 packages in 133.776s
Removing intermediate container cd5132c7795b
 ---> 2c345fd8a349
Step 4/10 : RUN mkdir -p /opt/web && cp -a /tmp/node_modules /opt/web/
 ---> Running in 1d5a8be633cd
Removing intermediate container 1d5a8be633cd
 ---> ff755ab8a2b9
Step 5/10 : WORKDIR /opt/web
Removing intermediate container 895cb74b3dc9
 ---> e94c5555190f
Step 6/10 : ADD . /opt/web
 ---> b74f0b3e1368
Step 7/10 : COPY . .
 ---> 8ad7be94eaa6
Step 8/10 : RUN npm run deploy:dev
 ---> Running in ce9b6fa9ab65

> roto-pros-web@1.0.0 deploy:dev /opt/web
> bash gitlab_docker.sh

[91mTERM environment variable not set.
[0m[91mgitlab_docker.sh: line 4: docker-compose: command not found
[0m[91mgitlab_docker.sh: line 6: docker: command not found
[0m[91mgitlab_docker.sh: line 8: docker-compose: command not found
[0m[91m
real	0m0.003s
user	0m0.000s
sys	0m0.000s
[0m[91mgitlab_docker.sh: line 10: docker: command not found
[0m[91mgitlab_docker.sh: line 11: docker: command not found
[0m[91mgitlab_docker.sh: line 14: docker: command not found
[0m[91mgitlab_docker.sh: line 18: docker-compose: command not found
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m [0m[91mfile sh
npm[0m[91m [0m[91mERR![0m[91m [0m[91mcode[0m[91m ELIFECYCLE
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m [0m[91merrno[0m[91m ENOENT
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m [0m[91msyscall[0m[91m spawn
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m roto-pros-web@1.0.0 deploy:dev: `bash gitlab_docker.sh`
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m spawn ENOENT
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m 
[0m[91mnpm[0m[91m [0m[91mERR![0m[91m Failed at the roto-pros-web@1.0.0 deploy:dev script.
[0m[91mnpm[0m[91m [0m[91mERR! This is probably not a problem with npm. There is likely additional logging output above.
[0m[91m
[0m[91mnpm [0m[91mERR![0m[91m A complete log of this run can be found in:
[0m[91mnpm ERR!     /root/.npm/_logs/2018-05-25T12_04_17_230Z-debug.log
[0m