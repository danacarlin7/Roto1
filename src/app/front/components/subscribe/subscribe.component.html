<div>
  <img class="img-responsive plans-cover-img" src="../../../../assets/images/TropheeMoney.jpg">
</div>
<h1 class="page-heading">All Access Packages</h1>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-4 col-lg-3 col-lg-offset-2 col-sm-5 "
         [class.col-md-offset-1]="i % 2 == 0"
         [class.col-md-offset-2]="i % 2 != 0"
         [class.col-sm-offset-1]="i % 2 == 0"
         *ngFor="let plan of plans;let i = index">
      <div class="rp-plan">
        <div class="plan-name">{{plan.name}}</div>
        <div class="plan-price-container">
          <div class="plan-price">
                      <span *ngIf="params.id">
                        <span class="discount-text" *ngIf="params.discount_type === 'flat'">{{(plan.amount / 100) - params.discount_rate | currency:'USD':true}}</span>
                      <span class="discount-text" *ngIf="params.discount_type === 'percentage'">{{(plan.amount / 100) * (1 - (params.discount_rate / 100)) | currency:'USD':true}}</span>
                      </span>
            <span *ngIf="!params.id">
                        <span>{{(plan.amount / 100) | currency:'USD':true}}/</span>
                      </span>
          </div>
          <div class="plan-time">{{plan.interval_count+' '+plan.interval}}</div>
        </div>
        <div class="plan-trial-period">{{'('+plan.trial_period_days+'-days free trial)'}}</div>
        <!-- <button class="btn-subscribe btn-lg btn-primary" (click)="onBtnSubscribeClick(plan)">Subscribe
        </button> -->
        <button class="btn-subscribe btn-lg btn-primary" (click)="couponClicked(plan)">Subscribe
        </button>
        <!-- <button class="btn-subscribe btn-lg btn-primary" (click)="open(content, plan)">Subscribe
        </button> -->
      </div>
    </div>
  </div>
</div>

<template #couponTemplateRef let-couponDialog="dialogRef">
  <div class="downloadModal">
    <div class="modal-header">
      <button type="button" class="close" (click)="couponDialog.close(true)"><span aria-hidden="true">&times;</span>
      </button>
      <h1 class="modal-title" style="font-size: 26px" id="myModalLabel">Enter Your Coupon</h1>
    </div>
    <div class="modal-body" style="margin: -10px 0px 40px;
    padding: 10px;">
      <div class="alert alert-danger fade in" *ngIf="errorMsg" style="    padding: 10px;
    text-align: center;
    margin: 15px 20px;">
        {{errorMsg }}
      </div>
      <div class="form-group form-group col-xs-4 col-xs-offset-4">
        <label class="srOnly">Coupon Code</label>
        <input type="text"
               class="col-xs-12"
               name="cId"
               placeholder="Code"
               #couponCode style="height: 36px;">
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-primary" (click)="onBtnSubscribeClick(couponDialog, couponCode.value);"><span
        area-hidden="true"></span> Apply
      </button>
      <button type="button" class="btn btn-default" (click)="onBtnSubscribeClick(couponDialog, false);">Skip</button>
    </div>
  </div>
</template>
